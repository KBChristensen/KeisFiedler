--
-- Target: Microsoft SQL Server 
-- Syntax: isql /Uuser /Ppassword /Sserver -i\path\filename.sql
-- Date  : Jul 08 2014 16:36
-- Script Generated by Database Design Studio 2.21.3 
--


--
-- Select Database: 'KeisFiedler'
--
USE KeisFiedler
GO
 
IF DB_NAME() = 'KeisFiedler'
    RAISERROR('''KeisFiedler'' DATABASE CONTEXT NOW IN USE.',1,1)
ELSE
    RAISERROR('ERROR IN BATCH FILE, ''USE KeisFiedler'' FAILED!  KILLING THE SPID NOW.',22,127) WITH LOG
 
GO

--
-- Create Table    : 'User'   
-- UserId          :  
-- Username        :  
-- Name            :  
-- Password        :  
-- Address         :  
-- Zipcode         :  
-- Userlevel       :  
-- Email           :  
--
CREATE TABLE UserSet (
    UserId         BIGINT IDENTITY(1,1) NOT NULL UNIQUE,
    Username       NVARCHAR(500) NOT NULL,
    Name           NVARCHAR(500) NOT NULL,
    Password       NVARCHAR(500) NOT NULL,
    Address        NVARCHAR(500) NOT NULL,
    Zipcode        BIGINT NOT NULL,
    Userlevel      INT NOT NULL,
    Email          NVARCHAR(500) NOT NULL,
CONSTRAINT pk_User PRIMARY KEY CLUSTERED (UserId))
GO

--
-- Create Table    : 'Category'   
-- CategoryId      :  
-- CategoryName    :  
--
CREATE TABLE Category (
    CategoryId     BIGINT IDENTITY(1,1) NOT NULL UNIQUE,
    CategoryName   NVARCHAR(500) NOT NULL,
CONSTRAINT pk_Category PRIMARY KEY CLUSTERED (CategoryId))
GO

--
-- Create Table    : 'Order'   
-- OrderId         :  
-- Ordernumber     :  
-- OrderDate       :  
-- UserId          :  (references User.UserId)
--
CREATE TABLE OrderSet (
    OrderId        BIGINT IDENTITY(1,1) NOT NULL UNIQUE,
    Ordernumber    NVARCHAR(500) NOT NULL,
    OrderDate      DATETIME NOT NULL,
    UserId         BIGINT NULL,
CONSTRAINT pk_Order PRIMARY KEY CLUSTERED (OrderId),
CONSTRAINT fk_Order FOREIGN KEY (UserId)
    REFERENCES UserSet (UserId)
    ON UPDATE CASCADE)
GO

--
-- Create Table    : 'Product'   
-- ProductId       :  
-- ProductName     :  
-- SerialNumber    :  
-- Price           :  
-- ProductImage    :  
-- CategoryId      :  (references Category.CategoryId)
-- OrderId         :  (references Order.OrderId)
--
CREATE TABLE Product (
    ProductId      BIGINT IDENTITY(1,1) NOT NULL UNIQUE,
    ProductName    NVARCHAR(500) NOT NULL,
    SerialNumber   BIGINT NULL,
    Price          BIGINT NOT NULL,
    ProductImage   NVARCHAR(255) NOT NULL,
    CategoryId     BIGINT NULL,
    OrderId        BIGINT NULL,
CONSTRAINT pk_Product PRIMARY KEY CLUSTERED (ProductId),
CONSTRAINT fk_Product FOREIGN KEY (CategoryId)
    REFERENCES Category (CategoryId)
    ON UPDATE CASCADE,
CONSTRAINT fk_Product2 FOREIGN KEY (OrderId)
    REFERENCES Order (OrderId)
    ON UPDATE CASCADE)
GO

